Демонстрация интеграции фреймворка Django и платёжного сервиса stripe.com.
Приложение также можно протестировать по адресу http://62.113.119.85/
Инструкцию по развёртыванию приведена в конце.


На главной странице отображается каталог товаров из таблицы (модели Django) Item. Для того чтобы сформировать заказ и перейти к оплате необходимо в колонке Amounts ввести количество и нажать на кнопку Create order. При этом создаётся заказ из выбранных товаров в котором все цены приведены в соответствии с курсом валюты оплаты. Информация по заказу с выбранными товами отображается на новой странице. На которой имеется кнопка 

Если на странице заказа нажать кнопку оплаты вы будете переадресованы на страницу сервиса оплаты, где в левой части экрана будут отображены выбранные вами товары с итоговой стоимостью, а в правой части вам будет необходимо ввести платёжные данные.
Для тестирования можно ввести карту 4242 4242 4242 4242 (срок действия любой незавершённый, пинкод произвольный). После успешной оплаты вы будете переадресованы на сайт с информацией о завершении оплаты заказа. Если после ввода карты на сервисе оплаты вернуться на страницу с заказом, то вы будете переадресованы на страницу с сообщением о непрошедшей оплате.

В решении реализован API в виде 2-х функций
/buy/{id}  - можно получить Stripe Session Id для оплаты выбранного Item.
/item/{id} - можно получить простейшую HTML страницу, на которой будет информация о выбранном Item и кнопка Buy. 

Реализован доступ к стандартной Django Admin панели (admin, 123) для просмотра и зполнения моделей базы данных.

В качестве использования environment variables в примере используется файл env_vars.py в котором хранятся все важные настройки приложения: Jango secret key (JSK), API_KEY, SERVER_IP, url страниц для сервиса оплаты.

---------------------------
Инструкция по развёртывание проекта (Django) на сервере

Подключаемся к серверу по ssh
ssh root@62.113.119.85

создаём папку для файлов проекта и переходи в неё
mkdir /home/rishat
cd /home/rishat

закачиваем на сервер архив с нашими файлами
scp "C:\it\Projects\stripe_proj\proj.zip" root@62.113.119.85:/home/rishat/
устанавливаем архиватор и распаковываем архив
sudo apt install unzip
unzip proj.zip

устанавливаем виртуальное окружение и активируем его
apt install python3.10-venv
python3 -m venv venv
source venv/bin/activate

устанавливаем необходимые библиотеки
pip install -r requirements.txt

запускаем сервер в фоновом режиме
python3 manage.py runserver 0.0.0.0:80 &

отключаемся от сервера
exit 
